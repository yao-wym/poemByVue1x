webpackJsonp([30],{58:function(t,e,o){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}var i=o(5),n=a(i);t.exports={replace:!0,data:function(){return{hotelName:this.$route.query.hotelName,title:this.$route.query.title,map:"",userLng:"",userLat:"",posLng:"",posLat:"",cloudDataLayer2:""}},components:{"app-header":function(t){!function(){var e=[o(4)];t.apply(null,e)}.call(this)}},ready:function(){this.hotelName=this.$route.query.hotelName,this.title=this.$route.query.title;var t=this.$route.query.pos;$.isEmpty(t)?this.getPosition():(this.posLng=poem.getPos(t).lng,this.posLat=poem.getPos(t).lat,this.getPosition())},methods:{getPosition:function(){if(window.navigator.geolocation){var t={enableHighAccuracy:!0};window.navigator.geolocation.getCurrentPosition(this.handleSuccess,this.handleError,t)}else poemUI.toast("浏览器不支持html5来获取地理位置信息")},handleSuccess:function(t){this.userLng=t.coords.longitude,this.userLat=t.coords.latitude,this.initMap()},handleError:function(){},addCloudLayer:function(){this.map.plugin("AMap.CloudDataLayer",function(){console.log(1);var t={clickable:!0,query:{keywords:""}};console.log(2),this.cloudDataLayer2=new AMap.CloudDataLayer("56a1d385305a2a32882907d0",t),console.log(3),this.cloudDataLayer2.setMap(this.map),console.log(4),console.log((0,n["default"])(this.cloudDataLayer2)),AMap.event.addListener(cloudDataLayer2,"click",function(t){var e=t.data,o=[];e._image[0]&&(o=['<img width=240 height=100 src="'+e._image[0]._preurl+'"><br>']);var a=new AMap.InfoWindow({content:"<font class='title'>"+e._name+"</font><hr/>"+o.join("")+"地址："+e._address+"<br />创建时间："+e._createtime+"<br />更新时间："+e._updatetime,size:new AMap.Size(0,0),autoMove:!0,offset:new AMap.Pixel(0,-25)});a.open(this.map,e._location)})})},initMap:function(){this.map=new AMap.Map("container"),this.map.setCenter([this.userLng,this.userLat]),this.map.setZoom(12);new AMap.Marker({position:[this.userLng,this.userLat],map:this.map});this.addCloudLayer()}},route:{data:function(t){t.next({hotelName:this.$route.query.hotelName,title:this.$route.query.title})},canReuse:function(t){return!1}}}},141:function(t,e,o){e=t.exports=o(1)(),e.push([t.id,"body,html{height:100%}body{margin:0;padding:0}#container{height:100%}",""])},216:function(t,e){t.exports="<app-header :title=title></app-header> <div id=container></div>"},288:function(t,e,o){var a,i;o(350),a=o(58),i=o(216),t.exports=a||{},t.exports.__esModule&&(t.exports=t.exports["default"]),i&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=i)},350:function(t,e,o){var a=o(141);"string"==typeof a&&(a=[[t.id,a,""]]);o(2)(a,{});a.locals&&(t.exports=a.locals)}});