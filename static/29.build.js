webpackJsonp([29],{52:function(t,e,a){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var i=a(5),n=o(i);t.exports={replace:!0,data:function(){return{hotelName:this.$route.query.hotelName,title:this.$route.query.title,map:"",userLng:"",userLat:"",posLng:"",posLat:"",cloudDataLayer2:""}},components:{"app-header":function(t){!function(){var e=[a(4)];t.apply(null,e)}.call(this)}},ready:function(){this.hotelName=this.$route.query.hotelName,this.title=this.$route.query.title;var t=this.$route.query.pos;$.isEmpty(t)?this.getPosition():(this.posLng=poem.getPos(t).lng,this.posLat=poem.getPos(t).lat,this.getPosition())},methods:{getPosition:function(){if(window.navigator.geolocation){var t={enableHighAccuracy:!0};window.navigator.geolocation.getCurrentPosition(this.handleSuccess,this.handleError,t)}else poemUI.toast("浏览器不支持html5来获取地理位置信息")},handleSuccess:function(t){this.userLng=t.coords.longitude,this.userLat=t.coords.latitude,this.initMap()},handleError:function(){},addCloudLayer:function(){this.map.plugin("AMap.CloudDataLayer",function(){alert(1);var t={clickable:!0,query:{keywords:""}};alert(2),this.cloudDataLayer2=new AMap.CloudDataLayer("56a1d385305a2a32882907d0",t),alert(3),this.cloudDataLayer2.setMap(this.map),alert(4),alert((0,n["default"])(this.cloudDataLayer2)),AMap.event.addListener(cloudDataLayer2,"click",function(t){var e=t.data,a=[];e._image[0]&&(a=['<img width=240 height=100 src="'+e._image[0]._preurl+'"><br>']);var o=new AMap.InfoWindow({content:"<font class='title'>"+e._name+"</font><hr/>"+a.join("")+"地址："+e._address+"<br />创建时间："+e._createtime+"<br />更新时间："+e._updatetime,size:new AMap.Size(0,0),autoMove:!0,offset:new AMap.Pixel(0,-25)});o.open(this.map,e._location)})})},initMap:function(){this.map=new AMap.Map("container"),this.map.setCenter([this.userLng,this.userLat]),this.map.setZoom(12);new AMap.Marker({position:[this.userLng,this.userLat],map:this.map});this.addCloudLayer()}},route:{data:function(t){t.next({hotelName:this.$route.query.hotelName,title:this.$route.query.title})},canReuse:function(t){return!1}}}},132:function(t,e,a){e=t.exports=a(1)(),e.push([t.id,"body,html{height:100%}body{margin:0;padding:0}#container{height:100%}",""])},209:function(t,e){t.exports="<app-header :title=title></app-header> <div id=container></div>"},280:function(t,e,a){var o,i;a(339),o=a(52),i=a(209),t.exports=o||{},t.exports.__esModule&&(t.exports=t.exports["default"]),i&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=i)},339:function(t,e,a){var o=a(132);"string"==typeof o&&(o=[[t.id,o,""]]);a(2)(o,{});o.locals&&(t.exports=o.locals)}});